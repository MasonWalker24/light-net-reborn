<html>
<head>
<title>Light Net</title>
<link rel="stylesheet" href="primary.css">
</head>
<body>
<div class="navbar">
<button class="mainbutton"><a href="index.html" class="navlogo"><h1>Light-Net</h1></a></button>
<button class="navbutton"><a href="proxie.html" class="navlogo"><h2>Surf Freely</h2></a></button>
</div>
<center><h1 class="indexheader">Node Server</h1></center>
<center><h2 class="indexcontent">A secure proxy to evade censorship and use sights as if you were actually on them</h2></center>
<form action="" method="get" id="web-search-box">
<input type="text" placeholder="Enter URL" id="url" name="url" class="url"/>&nbsp;
<input type="submit" value="GO" class="submit"/>
</form>
<form method="get" id="alloy">
<input type="text" placeholder="Enter URL" id="url" name="url" class="url"/>&nbsp;
<input type="submit" value="GO" class="submit"/>
</form>
</body>
<script>
function $(id) { return document.getElementById(id); } $('web-search-box').onsubmit = function() { var url = $('url').value; 
window.location.href = `http://ironunblocker.herokuapp.com/proxy/https://www.${url}`; return false; }; window.onload = function() { $('url').focus(); }
</script>
<script>
var purl = (()=>{
        /*
        // this will give the root domain, https://www.domain.tld/place => domain.tld
        */
        
        var tmp = location.hostname,
            tmp2 = location.hostname.split('.');
        
        if(tmp2.length == 3){
            tmp = tmp2[1] + '.' + tmp2[2]
        }
        
        return tmp
    })(),
    addproto = url =>{
        /* this will do domain.tld/place => https://domain.tld/place
        // if needed
        */
        
        if (!/^(?:f|ht)tps?\:\/\//.test(url))url = "https://" + url;
        return url;
    };

document.querySelector('#alloy').addEventListener('submit', event =>{
    event.preventDefault();
    
    // add the https:// to domain if it is needed
    var url = addproto(document.querySelector('#url').value);
    
    document.cookie = 'oldsmobile=2; expires=' + (Date.now() + 259200) + '; sameSite=lax; domain=.' + purl + '; path=/; secure;';
    
    // change the URL over to the unblocked page
    
    location.href = 'c.' + purl + '/alloy/?url=' + btoa(url);
});

window.addEventListener('DOMContentLoaded', ()=>{
    document.querySelector('#url').focus();
});        </script>
</html>
